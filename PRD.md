# Markdown Preview - PRD

## 개요

마크다운 파일을 쉽고 빠르게 프리뷰할 수 있는 웹 애플리케이션

## 목표

- 로컬 마크다운 파일을 브라우저에서 즉시 프리뷰
- 실시간 편집 및 미리보기 지원
- GitHub 스타일 마크다운 + 확장 문법 지원
- **설치 없이 웹에서 바로 사용** (PWA로 오프라인 지원)
- **다양한 스타일 프리셋**으로 개인화
- **초보자도 쉽게** 마크다운 학습 가능

---

## 타겟 사용자

| 사용자 | 주요 용도 |
|--------|-----------|
| 개발자 | README, 기술문서, API 문서 작성 |
| PM/기획자 | 기획서, 스펙 문서, 회의록 작성 |
| 블로거/작가 | 콘텐츠, 포스팅 작성 |
| 학생/입문자 | 마크다운 문법 학습, 노트 작성 |

## 핵심 사용 시나리오

1. **빠른 프리뷰**: .md 파일을 드래그해서 즉시 렌더링 확인
2. **문서 작성**: 처음부터 마크다운 문서 작성
3. **문서 편집**: 기존 .md 파일 수정 및 개선
4. **포맷 학습**: 초보자가 마크다운 문법 배우기

## 경쟁 제품 대비 차별점

| 차별점 | 설명 |
|--------|------|
| **설치 불필요** | 브라우저만 있으면 바로 사용 (vs Typora, VS Code) |
| **스타일 다양성** | GitHub/Notion/VS Code/미니멀 스타일 선택 (vs 단일 스타일) |
| **확장 문법** | 수식(KaTeX) + 다이어그램(Mermaid) 기본 지원 |
| **가벼움** | 빠른 로딩, 즉시 사용 가능 |
| **오프라인** | PWA로 인터넷 없이도 사용 가능 |

---

## 주요 기능

### 1. 파일 입력 방식

| 기능 | 설명 |
|------|------|
| 파일 선택 | 파일 탐색기에서 .md 파일 선택 |
| 드래그 앤 드롭 | 파일을 드롭존에 끌어다 놓기 |
| 직접 입력 | 텍스트 에디터에서 마크다운 직접 작성 |

### 2. 마크다운 렌더링

#### 기본 문법
- 헤딩 (h1-h6)
- 볼드, 이탤릭, 취소선
- 순서 있는/없는 리스트
- 링크, 이미지
- 인라인 코드, 코드 블록 (syntax highlighting)
- 인용문
- 수평선

#### GitHub Flavored Markdown (GFM)
- 테이블
- 체크박스 (task list)
- 자동 링크
- 취소선 (`~~text~~`)

#### 확장 기능
- **수식**: KaTeX 지원
  - 인라인: `$E = mc^2$`
  - 블록: `$$\sum_{i=1}^n i = \frac{n(n+1)}{2}$$`
- **다이어그램**: Mermaid 지원
  - 플로우차트
  - 시퀀스 다이어그램
  - 클래스 다이어그램
  - 간트 차트 등

### 3. UI/UX

#### 레이아웃 (데스크톱)
```
┌─────────────────────────────────────────────────────────────────┐
│  📄 파일명.md    [☀️/🌙] [⚙️] [⛶]          Markdown Preview    │
├───────┬────────────────────────┬────────────────────────────────┤
│       │                        │                                │
│  TOC  │      에디터 영역        │       프리뷰 영역              │
│       │    (마크다운 입력)      │    (렌더링된 결과)             │
│ [접기]│                        │                                │
│       │         ◀ 드래그 ▶     │                                │
└───────┴────────────────────────┴────────────────────────────────┘
```

#### 헤더 구성
| 요소 | 설명 |
|------|------|
| 파일명 | 현재 열린 파일명 표시 (미저장 시 * 표시) |
| 테마 토글 | 다크/라이트 모드 전환 버튼 |
| 설정 버튼 | 폰트, 스타일, 레이아웃 등 설정 패널 열기 |
| 전체화면 | 에디터/프리뷰 영역 전체화면 확대 |

#### 레이아웃 옵션
- **데스크톱**: 좌우 분할 (기본), 드래그로 비율 조절 가능
- **모바일**: 사용자 선택 가능
  - 탭 전환 (에디터 ↔ 프리뷰)
  - 상하 분할
  - 좌우 분할 (가로 모드)
  - 프리뷰만 보기

#### 목차 (TOC) 사이드바
- 왼쪽에 헤딩 기반 목차 자동 생성
- 펼치기/접기 토글 버튼
- 클릭 시 해당 위치로 스크롤
- 현재 보고 있는 섹션 하이라이트

#### 주요 UX 요소
- **실시간 프리뷰**: 입력과 동시에 렌더링 (debounce 적용)
- **스크롤 동기화**: 에디터와 프리뷰 스크롤 연동 (토글로 ON/OFF)
- **다크/라이트 모드**: 시스템 설정 따르기 기본, 수동 전환 가능
- **반응형**: 화면 크기에 따라 레이아웃 자동 조정

### 4. 추가 기능

| 기능 | 우선순위 | 설명 |
|------|----------|------|
| 코드 syntax highlighting | P0 | 언어별 코드 하이라이팅 |
| 파일 다운로드 | P0 | 편집한 마크다운을 .md로 저장 |
| 단축키 지원 | P0 | Ctrl+B 볼드, Ctrl+I 이탤릭 등 |
| 목차(TOC) 자동 생성 | P0 | 헤딩 기반 목차 사이드바 |
| 전체화면 모드 | P1 | 에디터/프리뷰 각각 전체화면 |
| HTML 내보내기 | P1 | 렌더링 결과를 HTML로 내보내기 |
| PDF 내보내기 | P1 | 렌더링 결과를 PDF로 내보내기 |
| 검색/바꾸기 | P1 | 문서 내 텍스트 검색 및 바꾸기 |

### 5. 이미지 삽입

| 방식 | 설명 |
|------|------|
| URL 링크 | 외부 이미지 URL 삽입 `![alt](url)` |
| 드래그 앤 드롭 | 이미지 파일을 에디터에 드래그하여 base64로 삽입 |
| 클립보드 붙여넣기 | Ctrl+V로 복사한 이미지 삽입 |

### 6. 데이터 저장/관리

#### 저장 방식
| 방식 | 설명 |
|------|------|
| 로컬 다운로드 | .md 파일로 로컬에 저장 |
| 브라우저 저장 | localStorage에 임시 저장 (자동 저장) |
| 클라우드 연동 | 외부 클라우드 서비스와 동기화 |

#### 클라우드 연동 (v1.1+)
- Google Drive
- Dropbox
- GitHub (Gist, Repository)
- OneDrive

#### 버전 관리
- **자동 저장**: 일정 간격으로 자동 저장, 저장 이력 유지
- **수동 스냅샷**: 사용자가 원할 때 버전 저장
- **복원**: 이전 버전으로 되돌리기

### 7. 템플릿

#### 기본 제공 템플릿
| 템플릿 | 설명 |
|--------|------|
| README | GitHub README 템플릿 |
| 회의록 | 회의록 양식 |
| 기술문서 | API/기술 문서 양식 |
| 블로그 포스트 | 블로그 글 양식 |
| 빈 문서 | 빈 문서 |

#### 사용자 템플릿
- 자주 쓰는 양식을 템플릿으로 저장
- 저장된 템플릿 목록에서 선택하여 사용

#### 초기 플레이스홀더
처음 방문 시 에디터에 표시되는 환영 문서:
- 앱 소개 및 주요 기능 설명
- 마크다운 기본 문법 가이드
- 단축키 안내
- 시작하기 버튼

### 8. 마크다운 가이드 (초보자 지원)

#### 툴바 버튼
에디터 상단에 서식 버튼 제공:
- 헤딩 (H1~H6)
- 볼드, 이탤릭, 취소선
- 링크, 이미지
- 코드 (인라인, 블록)
- 리스트 (순서, 비순서, 체크박스)
- 인용문, 수평선
- 테이블
- 수식, 다이어그램

#### 문법 치트시트
사이드바에서 열 수 있는 문법 참고표:
- 카테고리별 문법 정리
- 예시 코드 + 결과 미리보기
- 클릭하면 에디터에 삽입

#### 자동완성
- `#` 입력 시 헤딩 레벨 선택
- ``` 입력 시 언어 선택 드롭다운
- `[[` 입력 시 링크 자동완성
- 이모지 `:` 입력 시 이모지 선택

### 9. 공유 기능

| 기능 | 설명 |
|------|------|
| URL 공유 | 읽기 전용 링크 생성 (v2.0) |
| HTML 내보내기 | 스타일 포함된 HTML 파일 다운로드 |
| PDF 내보내기 | PDF 파일로 다운로드 |
| 마크다운 복사 | 원본 마크다운 클립보드 복사 |

### 10. 다국어 지원

| 언어 | 지원 |
|------|------|
| 한국어 | 기본 |
| English | 지원 |

- 브라우저 언어 감지하여 자동 선택
- 설정에서 수동 변경 가능

---

## 디자인 요구사항

### 1. 테마 시스템

#### 기본 동작
- **시스템 설정 따르기**: OS 다크/라이트 모드 감지하여 자동 적용 (기본값)
- **수동 전환**: 헤더의 토글 버튼으로 강제 전환 가능
- **설정 저장**: localStorage에 사용자 선택 저장

#### 프리뷰 스타일 프리셋
사용자가 선택 가능한 4가지 스타일:

| 스타일 | 설명 |
|--------|------|
| **GitHub** | GitHub README 스타일. 익숙하고 가독성 좋음 |
| **Notion** | Notion 문서 스타일. 깔끔하고 모던함 |
| **VS Code** | 코드 에디터 스타일. 개발자 친화적 |
| **미니멀** | 최소한의 스타일. 여백 많고 심플함 |

#### 커스터마이징
- **전체 테마 커스터마이징 지원**
  - 배경색, 텍스트 색상
  - 헤딩 색상, 링크 색상
  - 코드 블록 테마
  - 강조 색상 (액센트)

### 2. 타이포그래피

#### 에디터 폰트
사용자 선택 가능한 모노스페이스 폰트:
- Fira Code (기본값)
- JetBrains Mono
- Source Code Pro
- Consolas
- 시스템 기본

#### 폰트 설정
- 크기 조절: 12px ~ 24px (슬라이더)
- 줄 높이: 1.4 ~ 2.0
- 폰트 저장: localStorage에 사용자 설정 저장

### 3. 레이아웃 상세

#### 분할 비율
- 기본값: 50:50
- 드래그로 자유롭게 조절
- 최소 너비: 각 패널 200px 이상
- 비율 저장: localStorage에 저장

#### 사이드바 (TOC)
- 기본 너비: 200px
- 접기/펼치기 애니메이션
- 접힌 상태에서는 아이콘만 표시

### 4. 컬러 팔레트 (기본 라이트 테마)

```
배경색
├── Primary Background: #FFFFFF
├── Secondary Background: #F6F8FA
└── Code Block Background: #F6F8FA

텍스트
├── Primary Text: #24292F
├── Secondary Text: #57606A
└── Link: #0969DA

강조
├── Accent: #0969DA
├── Success: #1A7F37
├── Warning: #9A6700
└── Error: #CF222E

테두리
└── Border: #D0D7DE
```

### 5. 컬러 팔레트 (기본 다크 테마)

```
배경색
├── Primary Background: #0D1117
├── Secondary Background: #161B22
└── Code Block Background: #161B22

텍스트
├── Primary Text: #C9D1D9
├── Secondary Text: #8B949E
└── Link: #58A6FF

강조
├── Accent: #58A6FF
├── Success: #3FB950
├── Warning: #D29922
└── Error: #F85149

테두리
└── Border: #30363D
```

### 6. 단축키

| 단축키 | 기능 |
|--------|------|
| `Ctrl/Cmd + B` | 볼드 |
| `Ctrl/Cmd + I` | 이탤릭 |
| `Ctrl/Cmd + K` | 링크 삽입 |
| `Ctrl/Cmd + Shift + K` | 코드 블록 |
| `Ctrl/Cmd + S` | 파일 다운로드 |
| `Ctrl/Cmd + O` | 파일 열기 |
| `Ctrl/Cmd + Shift + P` | 프리뷰만 보기 토글 |
| `Ctrl/Cmd + \` | TOC 사이드바 토글 |
| `F11` | 전체화면 |

### 7. 애니메이션 & 트랜지션

- 테마 전환: 0.2s ease
- 사이드바 토글: 0.3s ease-out
- 드롭다운/모달: 0.15s ease
- 호버 효과: 0.1s ease

### 8. 반응형 브레이크포인트

| 브레이크포인트 | 너비 | 기본 레이아웃 |
|----------------|------|---------------|
| Desktop | ≥1024px | 좌우 분할 + TOC 사이드바 |
| Tablet | 768px~1023px | 좌우 분할, TOC 숨김 |
| Mobile | <768px | 탭 전환 (사용자 설정 가능) |

## 기술 스택

| 구분 | 기술 |
|------|------|
| 프레임워크 | React 18+ TypeScript |
| 빌드 도구 | Vite |
| 마크다운 파싱 | react-markdown |
| GFM 지원 | remark-gfm |
| 수식 렌더링 | remark-math + rehype-katex |
| 다이어그램 | mermaid |
| 코드 하이라이팅 | react-syntax-highlighter (Prism) |
| 스타일링 | Tailwind CSS |
| 상태관리 | Zustand 또는 Context API |
| PWA | Vite PWA Plugin |
| 다국어 | i18next |
| PDF 생성 | html2pdf.js 또는 jsPDF |

---

## 비기능 요구사항

### 성능
- 대용량 파일도 버벅임 없이 렌더링 (가상화 적용)
- 초기 로딩 3초 이내
- Lighthouse 성능 점수 90점 이상

### 접근성
- 키보드 네비게이션 완벽 지원
- 스크린리더 호환
- 고대비 모드 지원
- WCAG 2.1 AA 준수

### 브라우저 호환
- Chrome, Firefox, Safari, Edge 최신 2개 버전
- 모바일: iOS Safari, Android Chrome

### 오프라인 지원
- PWA로 오프라인에서도 완전한 기능 사용
- Service Worker로 에셋 캐싱
- 오프라인 시 자동 저장 → 온라인 복귀 시 동기화

### 보안
- XSS 방지 (마크다운 렌더링 시 sanitize)
- 로컬 저장 데이터 암호화 옵션

---

## 마일스톤

> **v1.x는 프론트엔드만으로 구현 (서버 불필요)**
> **v2.0부터 서버 필요**

### v1.0 - MVP (Core)
- [ ] 프로젝트 설정 (Vite + React + TypeScript)
- [ ] 파일 드래그 앤 드롭 / 선택
- [ ] 마크다운 에디터 (좌우 분할)
- [ ] 기본 마크다운 프리뷰
- [ ] GFM 지원 (테이블, 체크박스 등)
- [ ] 코드 syntax highlighting
- [ ] 파일 다운로드 (.md)
- [ ] 단축키 지원
- [ ] 목차(TOC) 사이드바
- [ ] 다크/라이트 모드
- [ ] 4가지 스타일 프리셋
- [ ] 초기 플레이스홀더 (환영 문서)
- [ ] 툴바 버튼

### v1.1 - 확장 기능
- [ ] KaTeX 수식 지원
- [ ] Mermaid 다이어그램
- [ ] 이미지 드래그/클립보드 삽입
- [ ] HTML/PDF 내보내기
- [ ] 검색/바꾸기
- [ ] 스크롤 동기화
- [ ] 문법 치트시트
- [ ] 자동완성
- [ ] 기본 템플릿 제공
- [ ] 사용자 템플릿 저장

### v1.2 - 로컬 저장 & 오프라인
- [ ] 브라우저 자동 저장 (localStorage/IndexedDB)
- [ ] 버전 관리 (자동 + 수동)
- [ ] PWA 오프라인 지원
- [ ] 다국어 (한국어/영어)

### v2.0 - 클라우드 & 협업 (서버 필요)
- [ ] 클라우드 연동 (Google Drive)
- [ ] 클라우드 연동 (Dropbox)
- [ ] 클라우드 연동 (GitHub)
- [ ] 클라우드 연동 (OneDrive)
- [ ] URL 공유 (읽기 전용)
- [ ] 실시간 동시 편집
- [ ] 댓글/피드백

---

## 참고

- [GitHub Flavored Markdown Spec](https://github.github.com/gfm/)
- [KaTeX Supported Functions](https://katex.org/docs/supported.html)
- [Mermaid Syntax](https://mermaid.js.org/intro/)
